ğŸ§­ æ€»ä½“æ–¹æ¡ˆæ¶æ„
[Client] â‡„ [API Gateway] â‡„ [AWS Lambda (FastAPI + Mangum)] â‡„ [Your logic]

fastapi-lambda-app/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ build.sh ï¼ˆå¯é€‰ä¸Šä¼ è„šæœ¬ï¼‰

â‘  ç¼–å†™ FastAPI ä»£ç ï¼ˆapp/main.pyï¼‰
from fastapi import FastAPI
from mangum import Mangum

app = FastAPI()

@app.get("/")
async def root():
    return {"message": "Hello from Lambda!"}

handler = Mangum(app)  # Lambda ç”¨çš„å…¥å£å‡½æ•°


â¸»
â‘¡ requirements.txtï¼ˆä¾èµ–æ–‡ä»¶ï¼‰

fastapi
mangum
ä½ å¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ å…¶å®ƒä¾èµ–ï¼Œæ¯”å¦‚ httpx, pydantic, sqlalchemy ç­‰ã€‚

â¸»

â‘¢ æ‰“åŒ…ä¸Šä¼ åˆ° AWS Lambdaï¼ˆæ‰‹åŠ¨ or è‡ªåŠ¨ï¼‰

âœ… æ¨èï¼šæœ¬åœ°æ‰“åŒ… ZIP ä¸Šä¼ 

ä»¥ä¸‹æ˜¯è¯¦ç»†æ‰“åŒ…æ­¥éª¤ï¼š
	1.	å®‰è£…ä¾èµ–åˆ°æœ¬åœ° package/ ç›®å½•ï¼š

mkdir -p package
pip install -r requirements.txt -t package

	2.	æŠŠä½ çš„æºç ä¸€èµ·æ‰“åŒ…ï¼š

cp -r app package/
cd package
zip -r9 ../fastapi-lambda.zip .

åŒ…å«ç›®å½•ç»“æ„åï¼Œç”Ÿæˆçš„ fastapi-lambda.zip æ˜¯ä½ è¦ä¸Šä¼ åˆ° Lambda çš„éƒ¨ç½²åŒ…ã€‚

â‘£ åˆ›å»º Lambda å‡½æ•°
	1.	ç™»å½• AWS æ§åˆ¶å° â†’ Lambda â†’ Create function
	2.	é€‰æ‹© â€œAuthor from scratchâ€ï¼Œå¡«å†™ï¼š
	â€¢	åç§°ï¼šfastapiLambda
	â€¢	Runtimeï¼šPython 3.9ï¼ˆæˆ– 3.10ï¼‰
	3.	é€‰æ‹© â€œä¸Šä¼  .zip æ–‡ä»¶â€
	4.	è®¾ç½® Handlerï¼šapp.main.handler
	â€¢	è¡¨ç¤ºä½ çš„å‡½æ•°ä»£ç åœ¨ app/main.py ä¸­ï¼Œä½¿ç”¨ handler = Mangum(app) ä½œä¸º Lambda å…¥å£ã€‚


5.	è°ƒæ•´è¶…æ—¶æ—¶é—´ï¼ˆå»ºè®®è®¾ç½®ä¸º 30 ç§’ä»¥ä¸Šï¼‰
	6.	åˆ›å»ºæˆ–é€‰ç”¨æ‰§è¡Œè§’è‰²ï¼ˆéœ€åŒ…å« CloudWatch æƒé™ï¼‰

â‘¤ é…ç½® API Gateway
	1.	æ‰“å¼€ API Gateway â†’ åˆ›å»º HTTP APIï¼ˆæ¯” REST API æ›´è½»é‡ï¼‰
	2.	æ·»åŠ æ•´åˆç›®æ ‡ï¼šé€‰æ‹© Lambda å‡½æ•°ï¼ˆä¸Šé¢åˆ›å»ºçš„ï¼‰
	3.	è®¾ç½®è·¯å¾„ï¼ˆå¦‚ /ï¼‰
	4.	éƒ¨ç½² APIï¼ˆè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª URLï¼‰

âœ… æµ‹è¯•åœ°å€å¯èƒ½é•¿è¿™æ ·ï¼š

https://abcd1234.execute-api.ap-northeast-1.amazonaws.com/
ç›´æ¥è®¿é—®å°±ä¼šçœ‹åˆ°ï¼š
{"message": "Hello from Lambda!"}

{"message": "Hello from Lambda!"}
@app.get("/items/{item_id}")
async def read_item(item_id: int):
    return {"item_id": item_id}


ğŸ Bonusï¼šFastAPI è·¯ç”±å¼‚æ­¥ç¤ºä¾‹
@app.get("/items/{item_id}")
async def read_item(item_id: int):
    return {"item_id": item_id}


ä½ å¯ä»¥åƒå¹³æ—¶å†™ FastAPI ä¸€æ ·ç»§ç»­æ‰©å±•

@app.get("/items/{item_id}")
async def read_item(item_id: int):
    return {"item_id": item_id}


API Gateway ä¼šè‡ªåŠ¨åŒ¹é… /items/123ã€‚









